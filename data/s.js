let gateway=`ws://${window.location.hostname}/ws`;let websocket;let debug=true;let autoEnabled,relayStatus;let timingConfig={hours:[0,0,0],duration:0,gmt_offset:8};function initWebSocket(){websocket=new WebSocket(gateway);websocket.onopen=onOpen;websocket.onclose=onClose;websocket.onmessage=onMessage}function onOpen(t){requestStatus()}function onClose(t){setTimeout(initWebSocket,2e3)}function onMessage(t){robotStatus=JSON.parse(t.data);if(debug){console.log(robotStatus["type"])}updateSensorReadings()}function isTouchEnabled(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}function requestStatus(){jsondata={type:"status"};websocket.send(JSON.stringify(jsondata))}function requestTimingConfig(){jsondata={type:"settings"};websocket.send(JSON.stringify(jsondata))}function toggleTimerEnable(){autoEnabled=!autoEnabled;jsondata={type:"auto",auto_enabled:autoEnabled};websocket.send(JSON.stringify(jsondata))}function updateSettings(){let t;let e;let n;jsondata={type:"chg_settings",hours:t,duration:e,gmt_offset:n};websocket.send(JSON.stringify(jsondata))}function setRelay(t){jsondata={type:"relay",relay_status:t};websocket.send(JSON.stringify(jsondata))}$(document).ready(function(){initWebSocket();$("#masterSwitch").click(toggleTimerEnable);setInterval(requestStatus,500);setInterval(requestTimingConfig,500)});